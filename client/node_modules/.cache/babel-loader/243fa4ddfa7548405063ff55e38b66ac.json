{"ast":null,"code":"import React, { useState } from \"react\";\n\nconst Auth = () => {\n  // const [email, setEmail] = useState(\"\");\n  // const [password, setPassword] = useState(\"\");\n  // // Creation du user connecté\n  // const [user, setUser] = useState(\"\");\n  // // Message d'erreur\n  // const [msg, setMsg] = useState(\"\");\n  const url = `http://localhost:8080/api/auth/login`; // L'objet user envoyer pour la connexion\n\n  const userObject = {\n    email: email,\n    password: password\n  }; // La method\n\n  const postLoggedIn = {\n    method: \"POST\",\n    body: JSON.stringify(userObject),\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  const Auth = async e => {\n    e.preventDefault();\n\n    try {\n      let res = await fetch(url, postLoggedIn);\n\n      if (res.status === 404) {\n        setMsg(\"Cet utilisateur n'existe pas !\");\n      } else {\n        const data = await res.json();\n        setUser({\n          id: data.userId,\n          pass: data.token\n        });\n      } // if (res.ok) {\n      // }\n\n    } catch (error) {\n      setMsg(error);\n    }\n  };\n\n  if (user) {\n    sessionStorage.setItem(\"isAuthenticate\", JSON.stringify(user));\n    window.location.reload(true);\n  }\n};\n\n_c = Auth;\nmodule.exports = Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","Auth","url","userObject","email","password","postLoggedIn","method","body","JSON","stringify","headers","Accept","e","preventDefault","res","fetch","status","setMsg","data","json","setUser","id","userId","pass","token","error","user","sessionStorage","setItem","window","location","reload","module","exports"],"sources":["F:/Works/Formation OC/SOUTENANCES/P7/groupomania/client/src/webpages/Auth.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst Auth = () => {\r\n    // const [email, setEmail] = useState(\"\");\r\n    // const [password, setPassword] = useState(\"\");\r\n\r\n    // // Creation du user connecté\r\n    // const [user, setUser] = useState(\"\");\r\n\r\n    // // Message d'erreur\r\n    // const [msg, setMsg] = useState(\"\");\r\n\r\n    const url = `http://localhost:8080/api/auth/login`;\r\n\r\n    // L'objet user envoyer pour la connexion\r\n    const userObject = {\r\n        email: email,\r\n        password: password,\r\n    };\r\n\r\n    // La method\r\n    const postLoggedIn = {\r\n        method: \"POST\",\r\n        body: JSON.stringify(userObject),\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n    };\r\n\r\n    const Auth = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n            let res = await fetch(url, postLoggedIn);\r\n\r\n            if (res.status === 404) {\r\n                setMsg(\"Cet utilisateur n'existe pas !\");\r\n            } else {\r\n                const data = await res.json();\r\n                setUser({ id: data.userId, pass: data.token });\r\n            }\r\n\r\n            // if (res.ok) {\r\n            // }\r\n        } catch (error) {\r\n            setMsg(error);\r\n        }\r\n    };\r\n\r\n    if (user) {\r\n        sessionStorage.setItem(\"isAuthenticate\", JSON.stringify(user));\r\n        window.location.reload(true);\r\n    }\r\n};\r\n\r\nmodule.exports = Auth;\r\n"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;AAEA,MAAMC,IAAI,GAAG,MAAM;EACf;EACA;EAEA;EACA;EAEA;EACA;EAEA,MAAMC,GAAG,GAAI,sCAAb,CAVe,CAYf;;EACA,MAAMC,UAAU,GAAG;IACfC,KAAK,EAAEA,KADQ;IAEfC,QAAQ,EAAEA;EAFK,CAAnB,CAbe,CAkBf;;EACA,MAAMC,YAAY,GAAG;IACjBC,MAAM,EAAE,MADS;IAEjBC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,UAAf,CAFW;IAGjBQ,OAAO,EAAE;MACLC,MAAM,EAAE,kBADH;MAEL,gBAAgB;IAFX;EAHQ,CAArB;;EASA,MAAMX,IAAI,GAAG,MAAOY,CAAP,IAAa;IACtBA,CAAC,CAACC,cAAF;;IAEA,IAAI;MACA,IAAIC,GAAG,GAAG,MAAMC,KAAK,CAACd,GAAD,EAAMI,YAAN,CAArB;;MAEA,IAAIS,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;QACpBC,MAAM,CAAC,gCAAD,CAAN;MACH,CAFD,MAEO;QACH,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAAnB;QACAC,OAAO,CAAC;UAAEC,EAAE,EAAEH,IAAI,CAACI,MAAX;UAAmBC,IAAI,EAAEL,IAAI,CAACM;QAA9B,CAAD,CAAP;MACH,CARD,CAUA;MACA;;IACH,CAZD,CAYE,OAAOC,KAAP,EAAc;MACZR,MAAM,CAACQ,KAAD,CAAN;IACH;EACJ,CAlBD;;EAoBA,IAAIC,IAAJ,EAAU;IACNC,cAAc,CAACC,OAAf,CAAuB,gBAAvB,EAAyCpB,IAAI,CAACC,SAAL,CAAeiB,IAAf,CAAzC;IACAG,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB;EACH;AACJ,CApDD;;KAAM/B,I;AAsDNgC,MAAM,CAACC,OAAP,GAAiBjC,IAAjB"},"metadata":{},"sourceType":"module"}